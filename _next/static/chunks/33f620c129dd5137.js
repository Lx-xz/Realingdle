(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,652,(e,t,a)=>{var i,r,o,n,s,c,l,d,h,p,u,m,g,f,_,v=!1;function x(){if(!v){v=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),a=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(m=/\b(iPhone|iP[ao]d)/.exec(e),g=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),f=/FBAN\/\w+;/i.exec(e),_=/Mobile/i.exec(e),u=!!/Win64/.exec(e),t){(i=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(i=document.documentMode);var x=/(?:Trident\/(\d+.\d+))/.exec(e);c=x?parseFloat(x[1])+4:i,r=t[2]?parseFloat(t[2]):NaN,o=t[3]?parseFloat(t[3]):NaN,s=(n=t[4]?parseFloat(t[4]):NaN)&&(t=/(?:Chrome\/(\d+\.\d+))/.exec(e))&&t[1]?parseFloat(t[1]):NaN}else i=r=o=s=n=NaN;if(a){if(a[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=!b||parseFloat(b[1].replace("_","."))}else l=!1;d=!!a[2],h=!!a[3]}else l=d=h=!1}}var b={ie:function(){return x()||i},ieCompatibilityMode:function(){return x()||c>i},ie64:function(){return b.ie()&&u},firefox:function(){return x()||r},opera:function(){return x()||o},webkit:function(){return x()||n},safari:function(){return b.webkit()},chrome:function(){return x()||s},windows:function(){return x()||d},osx:function(){return x()||l},linux:function(){return x()||h},iphone:function(){return x()||m},mobile:function(){return x()||m||g||p||_},nativeApp:function(){return x()||f},android:function(){return x()||p},ipad:function(){return x()||g}};t.exports=b},10316,(e,t,a)=>{"use strict";var i=!!("u">typeof window&&window.document&&window.document.createElement);t.exports={canUseDOM:i,canUseWorkers:"u">typeof Worker,canUseEventListeners:i&&!!(window.addEventListener||window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i}},33418,(e,t,a)=>{"use strict";var i,r=e.r(10316);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var a="on"+e,o=a in document;if(!o){var n=document.createElement("div");n.setAttribute(a,"return;"),o="function"==typeof n[a]}return!o&&i&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},52545,(e,t,a)=>{"use strict";var i=e.r(652),r=e.r(33418);function o(e){var t=0,a=0,i=0,r=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,r=10*a,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||r)&&e.deltaMode&&(1==e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:t,spinY:a,pixelX:i,pixelY:r}}o.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},t.exports=o},99733,(e,t,a)=>{t.exports=e.r(52545)},58441,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(18566),r=e.i(75254);let o=(0,r.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),n=(0,r.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var s=e.i(88699);let c=(0,r.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),l=(0,r.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var d=e.i(90571),h=e.i(99733);function p(e,t,a,i,r){void 0===r&&(r=0);var o=x(t.width,t.height,r),n=o.width,s=o.height;return{x:u(e.x,n,a.width,i),y:u(e.y,s,a.height,i)}}function u(e,t,a,i){var r=t*i/2-a/2;return b(e,-r,r)}function m(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function g(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function f(e,t){return Math.min(e,Math.max(0,t))}function _(e,t){return t}function v(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function x(e,t,a){var i=a*Math.PI/180;return{width:Math.abs(Math.cos(i)*e)+Math.abs(Math.sin(i)*t),height:Math.abs(Math.sin(i)*e)+Math.abs(Math.cos(i)*t)}}function b(e,t,a){return Math.min(Math.max(e,t),a)}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"==typeof e&&!!(e.length>0)}).join(" ").trim()}var y=function(e){function t(){var i=null!==e&&e.apply(this,arguments)||this;return i.cropperRef=a.createRef(),i.imageRef=a.createRef(),i.videoRef=a.createRef(),i.containerPosition={x:0,y:0},i.containerRef=null,i.styleRef=null,i.containerRect=null,i.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},i.dragStartPosition={x:0,y:0},i.dragStartCrop={x:0,y:0},i.gestureZoomStart=0,i.gestureRotationStart=0,i.isTouching=!1,i.lastPinchDistance=0,i.lastPinchRotation=0,i.rafDragTimeout=null,i.rafPinchTimeout=null,i.wheelTimer=null,i.currentDoc="u">typeof document?document:null,i.currentWindow="u">typeof window?window:null,i.resizeObserver=null,i.previousCropSize=null,i.isInitialized=!1,i.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},i.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&i.containerRef){var e=!0;i.resizeObserver=new window.ResizeObserver(function(t){if(e){e=!1;return}i.computeSizes()}),i.resizeObserver.observe(i.containerRef)}},i.preventZoomSafari=function(e){return e.preventDefault()},i.cleanEvents=function(){i.currentDoc&&(i.currentDoc.removeEventListener("mousemove",i.onMouseMove),i.currentDoc.removeEventListener("mouseup",i.onDragStopped),i.currentDoc.removeEventListener("touchmove",i.onTouchMove),i.currentDoc.removeEventListener("touchend",i.onDragStopped),i.currentDoc.removeEventListener("gesturechange",i.onGestureChange),i.currentDoc.removeEventListener("gestureend",i.onGestureEnd),i.currentDoc.removeEventListener("scroll",i.onScroll))},i.clearScrollEvent=function(){i.containerRef&&i.containerRef.removeEventListener("wheel",i.onWheel),i.wheelTimer&&clearTimeout(i.wheelTimer)},i.onMediaLoad=function(){var e=i.computeSizes();e&&(i.previousCropSize=e,i.emitCropData(),i.setInitialCrop(e),i.isInitialized=!0),i.props.onMediaLoaded&&i.props.onMediaLoaded(i.mediaSize)},i.setInitialCrop=function(e){if(i.props.initialCroppedAreaPercentages){var t,a,r,o,n,s,c,l=(t=i.props.initialCroppedAreaPercentages,a=i.mediaSize,r=i.props.rotation,o=i.props.minZoom,n=i.props.maxZoom,s=x(a.width,a.height,r),{crop:{x:(c=b(e.width/s.width*(100/t.width),o,n))*s.width/2-e.width/2-s.width*c*(t.x/100),y:c*s.height/2-e.height/2-s.height*c*(t.y/100)},zoom:c}),d=l.crop,h=l.zoom;i.props.onCropChange(d),i.props.onZoomChange&&i.props.onZoomChange(h)}else if(i.props.initialCroppedAreaPixels){var p,u,m,g,f,_,v,w,y,j=(p=i.props.initialCroppedAreaPixels,u=i.mediaSize,m=i.props.rotation,g=i.props.minZoom,f=i.props.maxZoom,void 0===m&&(m=0),_=x(u.naturalWidth,u.naturalHeight,m),w=b((v=u.width>u.height?u.width/u.naturalWidth:u.height/u.naturalHeight,e.height>e.width?e.height/(p.height*v):e.width/(p.width*v)),g,f),y=e.height>e.width?e.height/p.height:e.width/p.width,{crop:{x:((_.width-p.width)/2-p.x)*y,y:((_.height-p.height)/2-p.y)*y},zoom:w}),d=j.crop,h=j.zoom;i.props.onCropChange(d),i.props.onZoomChange&&i.props.onZoomChange(h)}},i.computeSizes=function(){var e,t,a,r,o,n,s=i.imageRef.current||i.videoRef.current;if(s&&i.containerRef){i.containerRect=i.containerRef.getBoundingClientRect(),i.saveContainerPosition();var c,l,h,p,u,m,g,f,_,v,b,w=i.containerRect.width/i.containerRect.height,y=(null==(e=i.imageRef.current)?void 0:e.naturalWidth)||(null==(t=i.videoRef.current)?void 0:t.videoWidth)||0,j=(null==(a=i.imageRef.current)?void 0:a.naturalHeight)||(null==(r=i.videoRef.current)?void 0:r.videoHeight)||0,C=s.offsetWidth<y||s.offsetHeight<j,S=y/j,N=void 0;if(C)switch(i.state.mediaObjectFit){default:case"contain":N=w>S?{width:i.containerRect.height*S,height:i.containerRect.height}:{width:i.containerRect.width,height:i.containerRect.width/S};break;case"horizontal-cover":N={width:i.containerRect.width,height:i.containerRect.width/S};break;case"vertical-cover":N={width:i.containerRect.height*S,height:i.containerRect.height}}else N={width:s.offsetWidth,height:s.offsetHeight};i.mediaSize=(0,d.__assign)((0,d.__assign)({},N),{naturalWidth:y,naturalHeight:j}),i.props.setMediaSize&&i.props.setMediaSize(i.mediaSize);var R=i.props.cropSize?i.props.cropSize:(c=i.mediaSize.width,l=i.mediaSize.height,h=i.containerRect.width,p=i.containerRect.height,u=i.props.aspect,void 0===(m=i.props.rotation)&&(m=0),f=(g=x(c,l,m)).width,_=g.height,(v=Math.min(f,h))>(b=Math.min(_,p))*u?{width:b*u,height:b}:{width:v,height:v/u});return((null==(o=i.state.cropSize)?void 0:o.height)!==R.height||(null==(n=i.state.cropSize)?void 0:n.width)!==R.width)&&i.props.onCropSizeChange&&i.props.onCropSizeChange(R),i.setState({cropSize:R},i.recomputeCropPosition),i.props.setCropSize&&i.props.setCropSize(R),R}},i.saveContainerPosition=function(){if(i.containerRef){var e=i.containerRef.getBoundingClientRect();i.containerPosition={x:e.left,y:e.top}}},i.onMouseDown=function(e){i.currentDoc&&(e.preventDefault(),i.currentDoc.addEventListener("mousemove",i.onMouseMove),i.currentDoc.addEventListener("mouseup",i.onDragStopped),i.saveContainerPosition(),i.onDragStart(t.getMousePoint(e)))},i.onMouseMove=function(e){return i.onDrag(t.getMousePoint(e))},i.onScroll=function(e){i.currentDoc&&(e.preventDefault(),i.saveContainerPosition())},i.onTouchStart=function(e){!i.currentDoc||(i.isTouching=!0,(!i.props.onTouchRequest||i.props.onTouchRequest(e))&&(i.currentDoc.addEventListener("touchmove",i.onTouchMove,{passive:!1}),i.currentDoc.addEventListener("touchend",i.onDragStopped),i.saveContainerPosition(),2===e.touches.length?i.onPinchStart(e):1===e.touches.length&&i.onDragStart(t.getTouchPoint(e.touches[0]))))},i.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?i.onPinchMove(e):1===e.touches.length&&i.onDrag(t.getTouchPoint(e.touches[0]))},i.onGestureStart=function(e){i.currentDoc&&(e.preventDefault(),i.currentDoc.addEventListener("gesturechange",i.onGestureChange),i.currentDoc.addEventListener("gestureend",i.onGestureEnd),i.gestureZoomStart=i.props.zoom,i.gestureRotationStart=i.props.rotation)},i.onGestureChange=function(e){if(e.preventDefault(),!i.isTouching){var a=t.getMousePoint(e),r=i.gestureZoomStart-1+e.scale;if(i.setNewZoom(r,a,{shouldUpdatePosition:!0}),i.props.onRotationChange){var o=i.gestureRotationStart+e.rotation;i.props.onRotationChange(o)}}},i.onGestureEnd=function(e){i.cleanEvents()},i.onDragStart=function(e){var t,a;i.dragStartPosition={x:e.x,y:e.y},i.dragStartCrop=(0,d.__assign)({},i.props.crop),null==(a=(t=i.props).onInteractionStart)||a.call(t)},i.onDrag=function(e){var t=e.x,a=e.y;i.currentWindow&&(i.rafDragTimeout&&i.currentWindow.cancelAnimationFrame(i.rafDragTimeout),i.rafDragTimeout=i.currentWindow.requestAnimationFrame(function(){if(i.state.cropSize&&void 0!==t&&void 0!==a){var e=t-i.dragStartPosition.x,r=a-i.dragStartPosition.y,o={x:i.dragStartCrop.x+e,y:i.dragStartCrop.y+r},n=i.props.restrictPosition?p(o,i.mediaSize,i.state.cropSize,i.props.zoom,i.props.rotation):o;i.props.onCropChange(n)}}))},i.onDragStopped=function(){var e,t;i.isTouching=!1,i.cleanEvents(),i.emitCropData(),null==(t=(e=i.props).onInteractionEnd)||t.call(e)},i.onWheel=function(e){if(i.currentWindow&&(!i.props.onWheelRequest||i.props.onWheelRequest(e))){e.preventDefault();var a=t.getMousePoint(e),r=(0,h.default)(e).pixelY,o=i.props.zoom-r*i.props.zoomSpeed/200;i.setNewZoom(o,a,{shouldUpdatePosition:!0}),i.state.hasWheelJustStarted||i.setState({hasWheelJustStarted:!0},function(){var e,t;return null==(t=(e=i.props).onInteractionStart)?void 0:t.call(e)}),i.wheelTimer&&clearTimeout(i.wheelTimer),i.wheelTimer=i.currentWindow.setTimeout(function(){return i.setState({hasWheelJustStarted:!1},function(){var e,t;return null==(t=(e=i.props).onInteractionEnd)?void 0:t.call(e)})},250)}},i.getPointOnContainer=function(e,t){var a=e.x,r=e.y;if(!i.containerRect)throw Error("The Cropper is not mounted");return{x:i.containerRect.width/2-(a-t.x),y:i.containerRect.height/2-(r-t.y)}},i.getPointOnMedia=function(e){var t=e.x,a=e.y,r=i.props,o=r.crop,n=r.zoom;return{x:(t+o.x)/n,y:(a+o.y)/n}},i.setNewZoom=function(e,t,a){var r=(void 0===a?{}:a).shouldUpdatePosition;if(i.state.cropSize&&i.props.onZoomChange){var o=b(e,i.props.minZoom,i.props.maxZoom);if(void 0===r||r){var n=i.getPointOnContainer(t,i.containerPosition),s=i.getPointOnMedia(n),c={x:s.x*o-n.x,y:s.y*o-n.y},l=i.props.restrictPosition?p(c,i.mediaSize,i.state.cropSize,o,i.props.rotation):c;i.props.onCropChange(l)}i.props.onZoomChange(o)}},i.getCropData=function(){var e,t,a,r,o,n,s,c,l,h,u,m,g,v,b;return i.state.cropSize?(e=i.props.restrictPosition?p(i.props.crop,i.mediaSize,i.state.cropSize,i.props.zoom,i.props.rotation):i.props.crop,t=i.mediaSize,a=i.state.cropSize,r=i.getAspect(),o=i.props.zoom,n=i.props.rotation,s=i.props.restrictPosition,void 0===n&&(n=0),void 0===s&&(s=!0),c=s?f:_,l=x(t.width,t.height,n),h=x(t.naturalWidth,t.naturalHeight,n),u={x:c(100,((l.width-a.width/o)/2-e.x/o)/l.width*100),y:c(100,((l.height-a.height/o)/2-e.y/o)/l.height*100),width:c(100,a.width/l.width*100/o),height:c(100,a.height/l.height*100/o)},m=Math.round(c(h.width,u.width*h.width/100)),g=Math.round(c(h.height,u.height*h.height/100)),v=h.width>=h.height*r?{width:Math.round(g*r),height:g}:{width:m,height:Math.round(m/r)},b=(0,d.__assign)((0,d.__assign)({},v),{x:Math.round(c(h.width-v.width,u.x*h.width/100)),y:Math.round(c(h.height-v.height,u.y*h.height/100))}),{croppedAreaPercentages:u,croppedAreaPixels:b}):null},i.emitCropData=function(){var e=i.getCropData();if(e){var t=e.croppedAreaPercentages,a=e.croppedAreaPixels;i.props.onCropComplete&&i.props.onCropComplete(t,a),i.props.onCropAreaChange&&i.props.onCropAreaChange(t,a)}},i.emitCropAreaChange=function(){var e=i.getCropData();if(e){var t=e.croppedAreaPercentages,a=e.croppedAreaPixels;i.props.onCropAreaChange&&i.props.onCropAreaChange(t,a)}},i.recomputeCropPosition=function(){if(i.state.cropSize){var e,t,a=i.props.crop;if(i.isInitialized&&(null==(e=i.previousCropSize)?void 0:e.width)&&(null==(t=i.previousCropSize)?void 0:t.height)&&(Math.abs(i.previousCropSize.width-i.state.cropSize.width)>1e-6||Math.abs(i.previousCropSize.height-i.state.cropSize.height)>1e-6)){var r=i.state.cropSize.width/i.previousCropSize.width,o=i.state.cropSize.height/i.previousCropSize.height;a={x:i.props.crop.x*r,y:i.props.crop.y*o}}var n=i.props.restrictPosition?p(a,i.mediaSize,i.state.cropSize,i.props.zoom,i.props.rotation):a;i.previousCropSize=i.state.cropSize,i.props.onCropChange(n),i.emitCropData()}},i.onKeyDown=function(e){var t,a,r=i.props,o=r.crop,n=r.onCropChange,s=r.keyboardStep,c=r.zoom,l=r.rotation,h=s;if(i.state.cropSize){e.shiftKey&&(h*=.2);var u=(0,d.__assign)({},o);switch(e.key){case"ArrowUp":u.y-=h,e.preventDefault();break;case"ArrowDown":u.y+=h,e.preventDefault();break;case"ArrowLeft":u.x-=h,e.preventDefault();break;case"ArrowRight":u.x+=h,e.preventDefault();break;default:return}i.props.restrictPosition&&(u=p(u,i.mediaSize,i.state.cropSize,c,l)),e.repeat||null==(a=(t=i.props).onInteractionStart)||a.call(t),n(u)}},i.onKeyUp=function(e){var t,a;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}i.emitCropData(),null==(a=(t=i.props).onInteractionEnd)||a.call(t)},i}return(0,d.__extends)(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null==(e=this.resizeObserver)||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null==(t=this.styleRef.parentNode)||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(t=e.cropSize)?void 0:t.height)!==(null==(a=this.props.cropSize)?void 0:a.height)||(null==(i=e.cropSize)?void 0:i.width)!==(null==(r=this.props.cropSize)?void 0:r.width)?this.computeSizes():((null==(o=e.crop)?void 0:o.x)!==(null==(n=this.props.crop)?void 0:n.x)||(null==(s=e.crop)?void 0:s.y)!==(null==(c=this.props.crop)?void 0:c.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null==(l=this.videoRef.current)||l.load());var t,a,i,r,o,n,s,c,l,d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,a=e.aspect;return t?t.width/t.height:a},t.prototype.getObjectFit=function(){var e,t,a,i;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var r=this.containerRect.width/this.containerRect.height;return((null==(e=this.imageRef.current)?void 0:e.naturalWidth)||(null==(t=this.videoRef.current)?void 0:t.videoWidth)||0)/((null==(a=this.imageRef.current)?void 0:a.naturalHeight)||(null==(i=this.videoRef.current)?void 0:i.videoHeight)||0)<r?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var a=t.getTouchPoint(e.touches[0]),i=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=m(a,i),this.lastPinchRotation=g(a,i),this.onDragStart(v(a,i))},t.prototype.onPinchMove=function(e){var a=this;if(this.currentDoc&&this.currentWindow){var i=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]),o=v(i,r);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=m(i,r),t=a.props.zoom*(e/a.lastPinchDistance);a.setNewZoom(t,o,{shouldUpdatePosition:!1}),a.lastPinchDistance=e;var n=g(i,r),s=a.props.rotation+(n-a.lastPinchRotation);a.props.onRotationChange&&a.props.onRotationChange(s),a.lastPinchRotation=n})}},t.prototype.render=function(){var e,t=this,i=this.props,r=i.image,o=i.video,n=i.mediaProps,s=i.cropperProps,c=i.transform,l=i.crop,h=l.x,p=l.y,u=i.rotation,m=i.zoom,g=i.cropShape,f=i.showGrid,_=i.roundCropAreaPixels,v=i.style,x=v.containerStyle,b=v.cropAreaStyle,y=v.mediaStyle,j=i.classes,C=j.containerClassName,S=j.cropAreaClassName,N=j.mediaClassName,R=null!=(e=this.state.mediaObjectFit)?e:this.getObjectFit();return a.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:x,className:w("reactEasyCrop_Container",C)},r?a.createElement("img",(0,d.__assign)({alt:"",className:w("reactEasyCrop_Image","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",N)},n,{src:r,ref:this.imageRef,style:(0,d.__assign)((0,d.__assign)({},y),{transform:c||"translate(".concat(h,"px, ").concat(p,"px) rotate(").concat(u,"deg) scale(").concat(m,")")}),onLoad:this.onMediaLoad})):o&&a.createElement("video",(0,d.__assign)({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:w("reactEasyCrop_Video","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",N)},n,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:(0,d.__assign)((0,d.__assign)({},y),{transform:c||"translate(".concat(h,"px, ").concat(p,"px) rotate(").concat(u,"deg) scale(").concat(m,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(e){return a.createElement("source",(0,d.__assign)({key:e.src},e))})),this.state.cropSize&&a.createElement("div",(0,d.__assign)({ref:this.cropperRef,style:(0,d.__assign)((0,d.__assign)({},b),{width:_?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:_?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:w("reactEasyCrop_CropArea","round"===g&&"reactEasyCrop_CropAreaRound",f&&"reactEasyCrop_CropAreaGrid",S)},s)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(a.Component),j=e.i(97936);function C({className:e,columns:a,children:i}){return(0,t.jsxs)("table",{className:e,children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:a.map(e=>(0,t.jsx)("th",{className:e.className,children:e.label},e.key))})}),(0,t.jsx)("tbody",{children:i})]})}var S=e.i(4048),N=e.i(35174),R=e.i(17927),z=e.i(1892);let k={name:"",description:"",image_url:"",image_file:null,age:"",state_id:"",class_ids:[],race_ids:[],occupation_ids:[],association_ids:[],place_ids:[]},P=[{key:"image",label:"Image"},{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"age",label:"Age"},{key:"state",label:"State"},{key:"classes",label:"Classes"},{key:"races",label:"Races"},{key:"occupations",label:"Occupations"},{key:"associations",label:"Associations"},{key:"places",label:"Places"}],E=P.map(e=>e.key),D=async(e,t,a)=>{let i=await new Promise((t,a)=>{let i=new Image;i.addEventListener("load",()=>t(i)),i.addEventListener("error",e=>a(e)),i.setAttribute("crossOrigin","anonymous"),i.src=e}),r=document.createElement("canvas"),o=r.getContext("2d");if(!o)throw Error("Unable to create crop canvas");r.width=t.width,r.height=t.height,o.drawImage(i,t.x,t.y,t.width,t.height,0,0,t.width,t.height);let n=await new Promise(e=>{r.toBlob(t=>e(t),"image/jpeg",.92)});if(!n)throw Error("Failed to generate cropped image");return new File([n],a,{type:"image/jpeg"})},A=e=>{let t=e.trim().split(/\s+/)[0]||"Character";return`https://placehold.co/400x500?text=${encodeURIComponent(t)}`},M=e=>e.trim().startsWith("https://placehold.co/400x500?text=")||e.trim().startsWith("https://placehold.co/4:5?text=")||e.trim().startsWith("https://placehold.co/200x400?text=");function L(){let e=(0,i.useRouter)(),[r,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[g,f]=(0,a.useState)("characters"),[_,v]=(0,a.useState)([]),[x,b]=(0,a.useState)([]),[w,L]=(0,a.useState)([]),[W,O]=(0,a.useState)([]),[T,F]=(0,a.useState)([]),[I,U]=(0,a.useState)([]),[Z,$]=(0,a.useState)([]),[H,K]=(0,a.useState)(!1),[G,q]=(0,a.useState)(!0),[V,X]=(0,a.useState)(!1),[Y,B]=(0,a.useState)(null),[J,Q]=(0,a.useState)(k),[ee,et]=(0,a.useState)(null),[ea,ei]=(0,a.useState)(""),[er,eo]=(0,a.useState)(null),[en,es]=(0,a.useState)("character.jpg"),[ec,el]=(0,a.useState)(!1),[ed,eh]=(0,a.useState)({x:0,y:0}),[ep,eu]=(0,a.useState)(1),[em,eg]=(0,a.useState)(null),[ef,e_]=(0,a.useState)(null),[ev,ex]=(0,a.useState)(!1),[eb,ew]=(0,a.useState)(E),[ey,ej]=(0,a.useState)(!1),[eC,eS]=(0,a.useState)(null),[eN,eR]=(0,a.useState)(""),ez=(0,a.useRef)(null),ek="realingdle:character-columns",eP=(0,a.useMemo)(()=>({class_ids:w,race_ids:W,occupation_ids:T,association_ids:I,place_ids:Z}),[w,W,T,I,Z]);(0,a.useEffect)(()=>{if(J.image_file){let e=URL.createObjectURL(J.image_file);return ei(e),()=>{URL.revokeObjectURL(e)}}if(J.image_url.trim()){let e=J.image_url.trim();ei(M(e)?A(J.name):e);return}ei(A(J.name))},[J.image_file,J.image_url,J.name]),(0,a.useEffect)(()=>{if(!ev)return;let e=e=>{ez.current&&(ez.current.contains(e.target)||ex(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[ev]),(0,a.useEffect)(()=>{let e=window.localStorage.getItem(ek);if(e)try{let t=JSON.parse(e);if(!Array.isArray(t))return;let a=new Set(P.map(e=>e.key)),i=t.filter(e=>a.has(e)),r=Array.from(new Set(["image","name",...i]));ew(r)}catch{window.localStorage.removeItem(ek)}},[]),(0,a.useEffect)(()=>{window.localStorage.setItem(ek,JSON.stringify(eb))},[eb]),(0,a.useEffect)(()=>{ej(!1),eS(null),eR("")},[g]),(0,a.useEffect)(()=>{let t=!0;(async()=>{let{data:a}=await R.supabase.auth.getSession();if(!t)return;let i=!!a.session,r=a.session?.user?.app_metadata?.role==="admin";(d(i),p(r),q(!1),i)?r||e.replace("/"):e.replace("/auth?next=/game-settings")})();let{data:a}=R.supabase.auth.onAuthStateChange((t,a)=>{let i=!!a,r=a?.user?.app_metadata?.role==="admin";(d(i),p(r),i)?r||e.replace("/"):e.replace("/auth?next=/game-settings")});return()=>{t=!1,a.subscription.unsubscribe()}},[e]),(0,a.useEffect)(()=>{r&&h&&eE()},[r,h]);let eE=async()=>{K(!0),m("");try{await Promise.all([eD(),eA()])}catch(e){console.error("Error loading configs data:",e),m("Unable to load data. Please check your Supabase configuration.")}finally{K(!1)}},eD=async()=>{v(await (0,z.fetchCharacters)({ascending:!1}))},eA=async()=>{let[e,t,a,i,r,o]=await Promise.all([R.supabase.from("states").select("*").order("name",{ascending:!0}),R.supabase.from("classes").select("*").order("name",{ascending:!0}),R.supabase.from("races").select("*").order("name",{ascending:!0}),R.supabase.from("occupations").select("*").order("name",{ascending:!0}),R.supabase.from("associations").select("*").order("name",{ascending:!0}),R.supabase.from("places").select("*").order("name",{ascending:!0})]),n=[e,t,a,i,r,o],s=n.find(e=>e.error)?.error;if(s)throw s;b(e.data||[]),L(t.data||[]),O(a.data||[]),F(i.data||[]),U(r.data||[]),$(o.data||[])},eM=(e,t)=>{Q(a=>{let i=a[e],r=i.includes(t);return{...a,[e]:r?i.filter(e=>e!==t):[...i,t]}})},eL=e=>e.length>0?e.map(e=>e.name).join(", "):"-",eW=()=>{X(!1),B(null),Q(k),et(null),el(!1),eo(null),eh({x:0,y:0}),eu(1),eg(null)},eO=async e=>{e.preventDefault(),Y?await eX(Y,J):await eV(J),eW()},eT=(e,t)=>{eo(e),es(t),eh({x:0,y:0}),eu(1),eg(null),el(!0)},eF=async e=>{let t=e.target.files?.[0];t&&(eT(URL.createObjectURL(t),t.name||"character.jpg"),e.target.value="")},eI=async()=>{if(er&&em)try{let e=await D(er,em,en.replace(/\.[^/.]+$/,".jpg"));Q(t=>({...t,image_file:e})),el(!1),URL.revokeObjectURL(er),eo(null)}catch(e){console.error("Error cropping character image:",e),alert("Failed to crop image. Please try again.")}},eU=()=>{e_(null)},eZ=({label:e,fieldKey:i,options:r,selectedIds:n,onAdd:s,onRemove:l,single:d=!1})=>{let h=(0,a.useRef)(null),p=ee===i,u=r.filter(e=>n.includes(e.id));return(0,a.useEffect)(()=>{if(!p)return;let e=e=>{h.current&&(h.current.contains(e.target)||et(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[p]),(0,t.jsxs)("div",{className:"attribute-picker",ref:h,children:[(0,t.jsxs)("div",{className:"attribute-picker__header",children:[(0,t.jsx)("span",{className:"attribute-picker__label",children:e}),(0,t.jsx)("button",{type:"button",className:"attribute-picker__add",onClick:()=>et(p?null:i),children:(0,t.jsx)(c,{size:14})})]}),p&&(0,t.jsx)("div",{className:"attribute-picker__menu",children:r.map(e=>{let a=n.includes(e.id);return(0,t.jsxs)("button",{type:"button",className:`attribute-picker__option ${a?"is-selected":""}`,onClick:()=>{if(d){s(e.id),et(null);return}a?l(e.id):s(e.id)},children:[(0,t.jsx)("span",{children:e.name}),a&&(0,t.jsx)("span",{className:"attribute-picker__check",children:(0,t.jsx)(o,{size:12})})]},e.id)})}),(0,t.jsx)("div",{className:"attribute-picker__tags",children:0===u.length?(0,t.jsx)("span",{className:"attribute-picker__empty",children:"None"}):u.map(e=>(0,t.jsxs)("span",{className:"attribute-picker__tag",children:[e.name,(0,t.jsx)("button",{type:"button",className:"attribute-picker__remove",onClick:()=>l(e.id),children:"x"})]},e.id))})]})},e$=(e,t)=>({name:e.name.trim(),description:e.description.trim()||null,image_url:t??(e.image_url.trim()||null),age:""===e.age?null:e.age,state_id:e.state_id||null}),eH=async e=>{let t="characters",a=e.name.replace(/[^a-zA-Z0-9.-]/g,"-"),i=`${Date.now()}-${a}`,{error:r}=await R.supabase.storage.from(t).upload(i,e,{upsert:!0});if(r)throw r;let{data:o}=R.supabase.storage.from(t).getPublicUrl(i);return o.publicUrl},eK=async e=>e.image_file?eH(e.image_file):null,eG=async(e,t,a,i)=>{let{error:r}=await R.supabase.from(e).delete().eq("character_id",a);if(r)throw r;if(0===i.length)return;let o=i.map(e=>({character_id:a,[t]:e})),{error:n}=await R.supabase.from(e).insert(o);if(n)throw n},eq=async(e,t)=>{await Promise.all([eG("character_classes","class_id",e,t.class_ids),eG("character_races","race_id",e,t.race_ids),eG("character_occupations","occupation_id",e,t.occupation_ids),eG("character_associations","association_id",e,t.association_ids),eG("character_places","place_id",e,t.place_ids)])},eV=async e=>{try{let t=await eK(e)||e.image_url.trim()||A(e.name),{data:a,error:i}=await R.supabase.from("characters").insert([e$(e,t)]).select("id").single();if(i)throw i;await eq(a.id,e),await eD()}catch(e){console.error("Error adding character:",e),alert("Error adding character. Please check your Supabase configuration.")}},eX=async(e,t)=>{try{let a=await eK(t),{error:i}=await R.supabase.from("characters").update(e$(t,a)).eq("id",e);if(i)throw i;await eq(e,t),await eD()}catch(e){console.error("Error updating character:",e),alert("Error updating character. Please check your Supabase configuration.")}},eY=async e=>{if(confirm("Are you sure you want to delete this character?"))try{let{error:t}=await R.supabase.from("characters").delete().eq("id",e);if(t)throw t;await eD()}catch(e){console.error("Error deleting character:",e),alert("Error deleting character. Please check your Supabase configuration.")}},eB=(e,t)=>({onAdd:async t=>{try{let{error:a}=await R.supabase.from(e).insert([{name:t}]);if(a)throw a;await eA()}catch(t){console.error(`Error adding ${e}:`,t),alert(`Error adding ${e}. Please try again.`)}},onEdit:async(t,a)=>{try{let{error:i}=await R.supabase.from(e).update({name:a}).eq("id",t);if(i)throw i;await eA()}catch(t){console.error(`Error updating ${e}:`,t),alert(`Error updating ${e}. Please try again.`)}},onDelete:async t=>{if(confirm("Are you sure you want to delete this item?"))try{let{error:a}=await R.supabase.from(e).delete().eq("id",t);if(a)throw a;await eA()}catch(t){console.error(`Error deleting ${e}:`,t),alert(`Error deleting ${e}. Please try again.`)}}}),eJ=eB("states",b),eQ=eB("classes",L),e0=eB("races",O),e1=eB("occupations",F),e2=eB("associations",U),e5=eB("places",$),e3="characters"===g?null:({states:{title:"States",items:x,handlers:eJ},classes:{title:"Classes",items:w,handlers:eQ},races:{title:"Races",items:W,handlers:e0},occupations:{title:"Occupations",items:T,handlers:e1},associations:{title:"Associations",items:I,handlers:e2},places:{title:"Places",items:Z,handlers:e5}})[g],e6=async e=>{e.preventDefault(),!e3||eN.trim()&&(eC?await e3.handlers.onEdit(eC,eN.trim()):await e3.handlers.onAdd(eN.trim()),eR(""),eS(null),ej(!1))},e4=P.filter(e=>eb.includes(e.key)),e9=eb.length<P.length,e7=P.filter(e=>!eb.includes(e.key)),e8=eb.length===P.length,te=["image","name"],tt=!!J.image_file||!!J.image_url.trim()&&!M(J.image_url);return G?(0,t.jsx)("div",{className:"configs",children:(0,t.jsx)("div",{className:"configs__loading",children:(0,t.jsx)(N.default,{label:"Checking access..."})})}):r?h?(0,t.jsx)("div",{className:"configs",children:(0,t.jsxs)("div",{className:"configs__container",children:[(0,t.jsx)("div",{className:"configs__header",children:(0,t.jsx)("h1",{className:"configs__title",children:"Game Settings"})}),u&&(0,t.jsx)("p",{className:"configs__error",children:u}),(0,t.jsxs)("div",{className:"configs__tabs",children:[(0,t.jsx)("button",{className:`configs__tab ${"characters"===g?"configs__tab--active":""}`,onClick:()=>f("characters"),children:"Characters"}),(0,t.jsx)("button",{className:`configs__tab ${"states"===g?"configs__tab--active":""}`,onClick:()=>f("states"),children:"States"}),(0,t.jsx)("button",{className:`configs__tab ${"classes"===g?"configs__tab--active":""}`,onClick:()=>f("classes"),children:"Classes"}),(0,t.jsx)("button",{className:`configs__tab ${"races"===g?"configs__tab--active":""}`,onClick:()=>f("races"),children:"Races"}),(0,t.jsx)("button",{className:`configs__tab ${"occupations"===g?"configs__tab--active":""}`,onClick:()=>f("occupations"),children:"Occupations"}),(0,t.jsx)("button",{className:`configs__tab ${"associations"===g?"configs__tab--active":""}`,onClick:()=>f("associations"),children:"Associations"}),(0,t.jsx)("button",{className:`configs__tab ${"places"===g?"configs__tab--active":""}`,onClick:()=>f("places"),children:"Places"})]}),H?(0,t.jsx)("div",{className:"configs__loading",children:(0,t.jsx)(N.default,{label:"Loading data..."})}):(0,t.jsxs)("div",{className:"configs__content",children:["characters"===g&&(0,t.jsxs)("div",{className:"character-table",children:[(0,t.jsxs)("div",{className:"character-table__header",children:[(0,t.jsx)("h2",{children:"Characters"}),(0,t.jsxs)("div",{className:"configs__table-toolbar",children:[(0,t.jsxs)("div",{className:"configs__column-picker",ref:ez,children:[(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>ex(e=>!e),children:"Columns"}),ev&&(0,t.jsxs)("div",{className:"configs__column-menu",children:[(0,t.jsxs)("div",{className:"configs__column-actions",children:[(0,t.jsx)("button",{type:"button",className:"configs__column-action",onClick:()=>{ew(P.map(e=>e.key))},disabled:e8,children:"Select all"}),(0,t.jsx)("button",{type:"button",className:"configs__column-action",onClick:()=>{ew(te)},disabled:eb.length===te.length,children:"Deselect all"})]}),P.map(e=>(0,t.jsxs)("label",{className:"configs__column-option",children:[(0,t.jsx)("input",{type:"checkbox",checked:eb.includes(e.key),onChange:()=>{var t;"image"!==(t=e.key)&&"name"!==t&&ew(e=>{let a=e.includes(t)?e.filter(e=>e!==t):[...e,t];return P.map(e=>e.key).filter(e=>a.includes(e))})},disabled:"image"===e.key||"name"===e.key}),(0,t.jsx)("span",{children:e.label})]},e.key))]})]}),!V&&(0,t.jsxs)(j.default,{onClick:()=>X(!0),children:[(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(c,{size:16})}),"Add Character"]})]})]}),V&&(0,t.jsxs)("form",{className:"character-form",onSubmit:eO,children:[(0,t.jsxs)("div",{className:"character-form__grid",children:[(0,t.jsxs)("div",{className:"character-form__field character-form__field--wide",children:[(0,t.jsx)("label",{children:"Image"}),(0,t.jsxs)("div",{className:"character-form__media",children:[(0,t.jsx)("div",{className:"character-form__media-preview",children:ea?(0,t.jsx)("img",{src:ea,alt:"Preview"}):(0,t.jsx)("span",{children:"No preview"})}),(0,t.jsxs)("div",{className:"character-form__media-controls",children:[(0,t.jsxs)("div",{className:"character-form__file",children:[(0,t.jsx)("input",{id:"image_file",type:"file",accept:"image/*",className:"character-form__file-input",onChange:eF}),(0,t.jsx)("label",{htmlFor:"image_file",className:"character-form__file-button",children:tt?"Select new file":"Choose file"}),(0,t.jsx)("span",{className:"character-form__file-name",children:J.image_file?.name||"No file selected"})]}),(0,t.jsx)("span",{className:"character-form__file-hint",children:"Image will be cropped to a 4:5 ratio before saving."}),(0,t.jsxs)("div",{className:"character-form__image-actions",children:[(0,t.jsx)("button",{type:"button",className:"character-form__file-button",onClick:()=>{if(J.image_file)return void eT(URL.createObjectURL(J.image_file),J.image_file.name||"character.jpg");let e=J.image_url.trim()||ea;e&&eT(e,`${J.name||"character"}.jpg`)},disabled:!tt,children:"Recrop image"}),(0,t.jsx)("button",{type:"button",className:"character-form__file-button character-form__file-button--danger",onClick:()=>{let e=A(J.name);Q(t=>({...t,image_file:null,image_url:e}))},disabled:!tt,children:"Delete image"})]})]})]})]}),(0,t.jsxs)("div",{className:"character-form__row character-form__row--two",children:[(0,t.jsxs)("div",{className:"character-form__field",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:J.name,onChange:e=>Q({...J,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"character-form__field",children:[(0,t.jsx)("label",{htmlFor:"age",children:"Age"}),(0,t.jsx)("input",{id:"age",type:"number",min:0,value:J.age,onChange:e=>Q({...J,age:""===e.target.value?"":Number(e.target.value)})})]})]}),(0,t.jsxs)("div",{className:"character-form__attributes",children:[(0,t.jsx)(eZ,{label:"State",fieldKey:"state_id",options:x,selectedIds:J.state_id?[J.state_id]:[],onAdd:e=>Q({...J,state_id:e}),onRemove:()=>Q({...J,state_id:""}),single:!0}),(0,t.jsx)(eZ,{label:"Classes",fieldKey:"class_ids",options:eP.class_ids,selectedIds:J.class_ids,onAdd:e=>eM("class_ids",e),onRemove:e=>eM("class_ids",e)}),(0,t.jsx)(eZ,{label:"Races",fieldKey:"race_ids",options:eP.race_ids,selectedIds:J.race_ids,onAdd:e=>eM("race_ids",e),onRemove:e=>eM("race_ids",e)}),(0,t.jsx)(eZ,{label:"Occupations",fieldKey:"occupation_ids",options:eP.occupation_ids,selectedIds:J.occupation_ids,onAdd:e=>eM("occupation_ids",e),onRemove:e=>eM("occupation_ids",e)}),(0,t.jsx)(eZ,{label:"Associations",fieldKey:"association_ids",options:eP.association_ids,selectedIds:J.association_ids,onAdd:e=>eM("association_ids",e),onRemove:e=>eM("association_ids",e)}),(0,t.jsx)(eZ,{label:"Places",fieldKey:"place_ids",options:eP.place_ids,selectedIds:J.place_ids,onAdd:e=>eM("place_ids",e),onRemove:e=>eM("place_ids",e)})]}),(0,t.jsxs)("div",{className:"character-form__field",children:[(0,t.jsx)("label",{htmlFor:"description",children:"Description"}),(0,t.jsx)("textarea",{id:"description",value:J.description,onChange:e=>Q({...J,description:e.target.value}),rows:3,placeholder:"Optional description"})]})]}),(0,t.jsxs)("div",{className:"character-form__actions",children:[(0,t.jsxs)(j.default,{type:"submit",children:[(0,t.jsx)("span",{className:"button__icon",children:Y?(0,t.jsx)(s.Pencil,{size:16}):(0,t.jsx)(c,{size:16})}),Y?"Update Character":"Add Character"]}),(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>{eW()},children:"Cancel"})]})]}),ec&&er&&(0,t.jsx)("div",{className:"character-form__crop-modal",role:"dialog","aria-modal":"true",children:(0,t.jsxs)("div",{className:"character-form__crop-card",children:[(0,t.jsx)("h3",{children:"Crop Image"}),(0,t.jsx)("div",{className:"character-form__crop-area",children:(0,t.jsx)(y,{image:er,crop:ed,zoom:ep,aspect:.8,onCropChange:eh,onZoomChange:eu,onCropComplete:(e,t)=>eg(t)})}),(0,t.jsxs)("div",{className:"character-form__crop-zoom",children:[(0,t.jsx)("label",{htmlFor:"crop_zoom",children:"Zoom"}),(0,t.jsx)("input",{id:"crop_zoom",type:"range",min:1,max:3,step:.01,value:ep,onChange:e=>eu(Number(e.target.value))})]}),(0,t.jsxs)("div",{className:"character-form__actions",children:[(0,t.jsx)(j.default,{type:"button",onClick:eI,children:"Apply Crop"}),(0,t.jsx)(j.default,{type:"button",variant:"secondary",onClick:()=>{el(!1),er&&URL.revokeObjectURL(er),eo(null)},children:"Cancel"})]})]})}),(0,t.jsx)("div",{className:"character-table__table-shell",children:(0,t.jsx)("div",{className:"character-table__scroll-shell",children:(0,t.jsx)(S.default,{className:"character-table__table-scroll",showHorizontal:!0,children:(0,t.jsx)("div",{className:"character-table__table-clip",children:(0,t.jsx)(C,{className:"character-table__table",columns:[...e4.map(e=>({key:e.key,label:e.label})),{key:"actions",label:"Actions",className:"character-table__cell--actions"}],children:0===_.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:e4.length+1,className:"character-table__empty",children:"No characters found. Add one to get started!"})}):_.map(e=>(0,t.jsxs)("tr",{children:[eb.includes("image")&&(0,t.jsx)("td",{children:e.image_url?(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"character-table__image-preview"}):"-"}),eb.includes("name")&&(0,t.jsx)("td",{children:e.name}),eb.includes("description")&&(0,t.jsx)("td",{children:e.description||"-"}),eb.includes("age")&&(0,t.jsx)("td",{children:e.age||"-"}),eb.includes("state")&&(0,t.jsx)("td",{children:e.state?.name||"-"}),eb.includes("classes")&&(0,t.jsx)("td",{children:eL(e.classes)}),eb.includes("races")&&(0,t.jsx)("td",{children:eL(e.races)}),eb.includes("occupations")&&(0,t.jsx)("td",{children:eL(e.occupations)}),eb.includes("associations")&&(0,t.jsx)("td",{children:eL(e.associations)}),eb.includes("places")&&(0,t.jsx)("td",{children:eL(e.places)}),(0,t.jsx)("td",{className:"character-table__cell--actions",children:(0,t.jsxs)("div",{className:"character-table__actions",children:[e9&&(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>{e_(e)},children:(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(n,{size:16})})}),(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>{B(e.id),Q({name:e.name,description:e.description||"",image_url:e.image_url||"",image_file:null,age:e.age??"",state_id:e.state?.id||"",class_ids:e.classes.map(e=>e.id),race_ids:e.races.map(e=>e.id),occupation_ids:e.occupations.map(e=>e.id),association_ids:e.associations.map(e=>e.id),place_ids:e.places.map(e=>e.id)}),X(!0)},children:(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(s.Pencil,{size:16})})}),(0,t.jsx)(j.default,{variant:"danger",onClick:()=>eY(e.id),children:(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(l,{size:16})})})]})})]},e.id))})})})})}),ef&&e9&&(0,t.jsx)("div",{className:"character-table__modal",role:"dialog","aria-modal":"true",onClick:eU,children:(0,t.jsxs)("div",{className:"character-table__modal-card",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"character-table__modal-header",children:[(0,t.jsx)("h3",{children:ef.name}),(0,t.jsx)(j.default,{variant:"secondary",onClick:eU,children:"Fechar"})]}),(0,t.jsx)("div",{className:"character-table__modal-body",children:e7.map(e=>{let a={description:ef.description||"-",places:eL(ef.places),state:ef.state?.name||"-",age:String(ef.age??"-"),classes:eL(ef.classes),races:eL(ef.races),occupations:eL(ef.occupations),associations:eL(ef.associations),image:ef.image_url||"-",name:ef.name};return(0,t.jsxs)("div",{className:"character-table__modal-row",children:[(0,t.jsx)("span",{className:"character-table__modal-label",children:e.label}),(0,t.jsx)("span",{className:"character-table__modal-value",children:a[e.key]??"-"})]},e.key)})})]})})]}),e3&&(0,t.jsxs)("div",{className:"lookup-table",children:[(0,t.jsxs)("div",{className:"lookup-table__header",children:[(0,t.jsx)("h2",{children:e3.title}),!ey&&(0,t.jsxs)(j.default,{onClick:()=>ej(!0),children:[(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(c,{size:16})}),"Add ",e3.title.slice(0,-1)]})]}),ey&&(0,t.jsxs)("form",{className:"lookup-table__form",onSubmit:e6,children:[(0,t.jsxs)("div",{className:"lookup-table__field",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:eN,onChange:e=>eR(e.target.value),required:!0,placeholder:`Enter ${e3.title.toLowerCase().slice(0,-1)} name`,autoFocus:!0})]}),(0,t.jsxs)("div",{className:"lookup-table__actions",children:[(0,t.jsxs)(j.default,{type:"submit",children:[(0,t.jsx)("span",{className:"button__icon",children:eC?(0,t.jsx)(s.Pencil,{size:16}):(0,t.jsx)(c,{size:16})}),eC?"Update":"Add"]}),(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>{ej(!1),eS(null),eR("")},children:"Cancel"})]})]}),(0,t.jsx)("div",{className:"lookup-table__list",children:0===e3.items.length?(0,t.jsxs)("div",{className:"lookup-table__empty",children:["No ",e3.title.toLowerCase()," found. Add one to get started!"]}):(0,t.jsx)(C,{className:"lookup-table__table",columns:[{key:"name",label:"Name"},{key:"actions",label:"Actions",className:"lookup-table__cell--actions"}],children:e3.items.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{className:"lookup-table__cell--actions",children:(0,t.jsxs)("div",{className:"lookup-table__row-actions",children:[(0,t.jsx)(j.default,{variant:"secondary",onClick:()=>{eS(e.id),eR(e.name),ej(!0)},children:(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(s.Pencil,{size:16})})}),(0,t.jsx)(j.default,{variant:"danger",onClick:()=>e3.handlers.onDelete(e.id),children:(0,t.jsx)("span",{className:"button__icon",children:(0,t.jsx)(l,{size:16})})})]})})]},e.id))})})]})]})]})}):(0,t.jsx)("div",{className:"configs",children:(0,t.jsx)("div",{className:"configs__loading",children:"Access denied."})}):(0,t.jsx)("div",{className:"configs",children:(0,t.jsx)("div",{className:"configs__loading",children:"Redirecting to login..."})})}e.s(["default",()=>L],58441)}]);