(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88699,e=>{"use strict";let a=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>a],88699)},97936,e=>{"use strict";var a=e.i(43476);function s({children:e,onClick:s,type:t="button",variant:c="primary",disabled:i=!1}){return(0,a.jsx)("button",{className:`button button--${c}`,onClick:s,type:t,disabled:i,children:e})}e.s(["default",()=>s])},1892,e=>{"use strict";var a=e.i(17927);let s=`
  id,
  name,
  description,
  image_url,
  age,
  created_at,
  updated_at,
  state:states(id, name),
  classes:character_classes(class:classes(id, name)),
  races:character_races(race:races(id, name)),
  occupations:character_occupations(occupation:occupations(id, name)),
  associations:character_associations(association:associations(id, name)),
  places:character_places(place:places(id, name))
`,t=e=>({id:e.id,name:e.name,description:e.description,image_url:e.image_url,age:e.age,created_at:e.created_at,updated_at:e.updated_at,state:Array.isArray(e.state)?e.state[0]:e.state,classes:e.classes?.map(e=>e.class)??[],races:e.races?.map(e=>e.race)??[],occupations:e.occupations?.map(e=>e.occupation)??[],associations:e.associations?.map(e=>e.association)??[],places:e.places?.map(e=>e.place)??[]}),c=async(e={})=>{let{data:c,error:i}=await a.supabase.from("characters").select(s).order("name",{ascending:e.ascending??!0});if(i)throw i;return c.map(t)};e.s(["fetchCharacters",0,c])},58441,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),c=e.i(75254);let i=(0,c.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),l=(0,c.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var r=e.i(88699);let n=(0,c.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=(0,c.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var d=e.i(97936);function u({className:e,columns:s,children:t}){return(0,a.jsxs)("table",{className:e,children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:s.map(e=>(0,a.jsx)("th",{className:e.className,children:e.label},e.key))})}),(0,a.jsx)("tbody",{children:t})]})}var m=e.i(4048),h=e.i(17927),_=e.i(1892);let p={name:"",description:"",image_url:"",image_file:null,age:"",state_id:"",class_ids:[],race_ids:[],occupation_ids:[],association_ids:[],place_ids:[]},g=[{key:"image",label:"Image"},{key:"name",label:"Name"},{key:"description",label:"Description"},{key:"age",label:"Age"},{key:"state",label:"State"},{key:"classes",label:"Classes"},{key:"races",label:"Races"},{key:"occupations",label:"Occupations"},{key:"associations",label:"Associations"},{key:"places",label:"Places"}],f=g.map(e=>e.key);function b(){let e=(0,t.useRouter)(),[c,b]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),[N,k]=(0,s.useState)("characters"),[w,C]=(0,s.useState)([]),[S,A]=(0,s.useState)([]),[E,P]=(0,s.useState)([]),[R,z]=(0,s.useState)([]),[$,U]=(0,s.useState)([]),[L,I]=(0,s.useState)([]),[M,O]=(0,s.useState)([]),[D,K]=(0,s.useState)(!1),[q,F]=(0,s.useState)(!0),[T,B]=(0,s.useState)(!1),[H,J]=(0,s.useState)(null),[V,G]=(0,s.useState)(p),[Z,Q]=(0,s.useState)(null),[W,X]=(0,s.useState)("url"),[Y,ee]=(0,s.useState)(""),[ea,es]=(0,s.useState)(null),[et,ec]=(0,s.useState)(!1),[ei,el]=(0,s.useState)(f),[er,en]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)(null),[eu,em]=(0,s.useState)(""),eh=(0,s.useRef)(null),e_="https://placehold.co/200x400?text=",ep="realingdle:character-columns",eg=(0,s.useMemo)(()=>({class_ids:E,race_ids:R,occupation_ids:$,association_ids:L,place_ids:M}),[E,R,$,L,M]);(0,s.useEffect)(()=>{if("url"!==W||V.image_url||G(e=>({...e,image_url:e_})),"upload"===W&&V.image_file){let e=URL.createObjectURL(V.image_file);return ee(e),()=>{URL.revokeObjectURL(e)}}"url"===W&&V.image_url.trim()?ee(V.image_url.trim()):ee("")},[W,V.image_file,V.image_url]),(0,s.useEffect)(()=>{if(!et)return;let e=e=>{eh.current&&(eh.current.contains(e.target)||ec(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[et]),(0,s.useEffect)(()=>{let e=window.localStorage.getItem(ep);if(e)try{let a=JSON.parse(e);if(!Array.isArray(a))return;let s=new Set(g.map(e=>e.key)),t=a.filter(e=>s.has(e)),c=Array.from(new Set(["image","name",...t]));el(c)}catch{window.localStorage.removeItem(ep)}},[]),(0,s.useEffect)(()=>{window.localStorage.setItem(ep,JSON.stringify(ei))},[ei]),(0,s.useEffect)(()=>{en(!1),ed(null),em("")},[N]),(0,s.useEffect)(()=>{let a=!0;(async()=>{let{data:s}=await h.supabase.auth.getSession();if(!a)return;let t=!!s.session,c=s.session?.user?.app_metadata?.role==="admin";(b(t),j(c),F(!1),t)?c||e.replace("/"):e.replace("/auth?next=/game-settings")})();let{data:s}=h.supabase.auth.onAuthStateChange((a,s)=>{let t=!!s,c=s?.user?.app_metadata?.role==="admin";(b(t),j(c),t)?c||e.replace("/"):e.replace("/auth?next=/game-settings")});return()=>{a=!1,s.subscription.unsubscribe()}},[e]),(0,s.useEffect)(()=>{c&&x&&ef()},[c,x]);let ef=async()=>{K(!0),v("");try{await Promise.all([eb(),ex()])}catch(e){console.error("Error loading configs data:",e),v("Unable to load data. Please check your Supabase configuration.")}finally{K(!1)}},eb=async()=>{C(await (0,_.fetchCharacters)({ascending:!1}))},ex=async()=>{let[e,a,s,t,c,i]=await Promise.all([h.supabase.from("states").select("*").order("name",{ascending:!0}),h.supabase.from("classes").select("*").order("name",{ascending:!0}),h.supabase.from("races").select("*").order("name",{ascending:!0}),h.supabase.from("occupations").select("*").order("name",{ascending:!0}),h.supabase.from("associations").select("*").order("name",{ascending:!0}),h.supabase.from("places").select("*").order("name",{ascending:!0})]),l=[e,a,s,t,c,i],r=l.find(e=>e.error)?.error;if(r)throw r;A(e.data||[]),P(a.data||[]),z(s.data||[]),U(t.data||[]),I(c.data||[]),O(i.data||[])},ej=(e,a)=>{G(s=>{let t=s[e],c=t.includes(a);return{...s,[e]:c?t.filter(e=>e!==a):[...t,a]}})},ey=e=>e.length>0?e.map(e=>e.name).join(", "):"-",ev=()=>{B(!1),J(null),G(p),X("url"),Q(null)},eN=async e=>{e.preventDefault(),H?await ez(H,V):await eR(V),ev()},ek=()=>{es(null)},ew=({label:e,fieldKey:t,options:c,selectedIds:l,onAdd:r,onRemove:o,single:d=!1})=>{let u=(0,s.useRef)(null),m=Z===t,h=c.filter(e=>l.includes(e.id));return(0,s.useEffect)(()=>{if(!m)return;let e=e=>{u.current&&(u.current.contains(e.target)||Q(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,a.jsxs)("div",{className:"attribute-picker",ref:u,children:[(0,a.jsxs)("div",{className:"attribute-picker__header",children:[(0,a.jsx)("span",{className:"attribute-picker__label",children:e}),(0,a.jsx)("button",{type:"button",className:"attribute-picker__add",onClick:()=>Q(m?null:t),children:(0,a.jsx)(n,{size:14})})]}),m&&(0,a.jsx)("div",{className:"attribute-picker__menu",children:c.map(e=>{let s=l.includes(e.id);return(0,a.jsxs)("button",{type:"button",className:`attribute-picker__option ${s?"is-selected":""}`,onClick:()=>{if(d){r(e.id),Q(null);return}s?o(e.id):r(e.id)},children:[(0,a.jsx)("span",{children:e.name}),s&&(0,a.jsx)("span",{className:"attribute-picker__check",children:(0,a.jsx)(i,{size:12})})]},e.id)})}),(0,a.jsx)("div",{className:"attribute-picker__tags",children:0===h.length?(0,a.jsx)("span",{className:"attribute-picker__empty",children:"None"}):h.map(e=>(0,a.jsxs)("span",{className:"attribute-picker__tag",children:[e.name,(0,a.jsx)("button",{type:"button",className:"attribute-picker__remove",onClick:()=>o(e.id),children:"x"})]},e.id))})]})},eC=(e,a)=>({name:e.name.trim(),description:e.description.trim()||null,image_url:a??(e.image_url.trim()||null),age:""===e.age?null:e.age,state_id:e.state_id||null}),eS=async e=>{let a="characters",s=e.name.replace(/[^a-zA-Z0-9.-]/g,"-"),t=`${Date.now()}-${s}`,{error:c}=await h.supabase.storage.from(a).upload(t,e,{upsert:!0});if(c)throw c;let{data:i}=h.supabase.storage.from(a).getPublicUrl(t);return i.publicUrl},eA=async e=>e.image_file?eS(e.image_file):null,eE=async(e,a,s,t)=>{let{error:c}=await h.supabase.from(e).delete().eq("character_id",s);if(c)throw c;if(0===t.length)return;let i=t.map(e=>({character_id:s,[a]:e})),{error:l}=await h.supabase.from(e).insert(i);if(l)throw l},eP=async(e,a)=>{await Promise.all([eE("character_classes","class_id",e,a.class_ids),eE("character_races","race_id",e,a.race_ids),eE("character_occupations","occupation_id",e,a.occupation_ids),eE("character_associations","association_id",e,a.association_ids),eE("character_places","place_id",e,a.place_ids)])},eR=async e=>{try{let a=await eA(e),{data:s,error:t}=await h.supabase.from("characters").insert([eC(e,a)]).select("id").single();if(t)throw t;await eP(s.id,e),await eb()}catch(e){console.error("Error adding character:",e),alert("Error adding character. Please check your Supabase configuration.")}},ez=async(e,a)=>{try{let s=await eA(a),{error:t}=await h.supabase.from("characters").update(eC(a,s)).eq("id",e);if(t)throw t;await eP(e,a),await eb()}catch(e){console.error("Error updating character:",e),alert("Error updating character. Please check your Supabase configuration.")}},e$=async e=>{if(confirm("Are you sure you want to delete this character?"))try{let{error:a}=await h.supabase.from("characters").delete().eq("id",e);if(a)throw a;await eb()}catch(e){console.error("Error deleting character:",e),alert("Error deleting character. Please check your Supabase configuration.")}},eU=(e,a)=>({onAdd:async a=>{try{let{error:s}=await h.supabase.from(e).insert([{name:a}]);if(s)throw s;await ex()}catch(a){console.error(`Error adding ${e}:`,a),alert(`Error adding ${e}. Please try again.`)}},onEdit:async(a,s)=>{try{let{error:t}=await h.supabase.from(e).update({name:s}).eq("id",a);if(t)throw t;await ex()}catch(a){console.error(`Error updating ${e}:`,a),alert(`Error updating ${e}. Please try again.`)}},onDelete:async a=>{if(confirm("Are you sure you want to delete this item?"))try{let{error:s}=await h.supabase.from(e).delete().eq("id",a);if(s)throw s;await ex()}catch(a){console.error(`Error deleting ${e}:`,a),alert(`Error deleting ${e}. Please try again.`)}}}),eL=eU("states",A),eI=eU("classes",P),eM=eU("races",z),eO=eU("occupations",U),eD=eU("associations",I),eK=eU("places",O),eq="characters"===N?null:({states:{title:"States",items:S,handlers:eL},classes:{title:"Classes",items:E,handlers:eI},races:{title:"Races",items:R,handlers:eM},occupations:{title:"Occupations",items:$,handlers:eO},associations:{title:"Associations",items:L,handlers:eD},places:{title:"Places",items:M,handlers:eK}})[N],eF=async e=>{e.preventDefault(),!eq||eu.trim()&&(eo?await eq.handlers.onEdit(eo,eu.trim()):await eq.handlers.onAdd(eu.trim()),em(""),ed(null),en(!1))},eT=g.filter(e=>ei.includes(e.key)),eB=ei.length<g.length,eH=g.filter(e=>!ei.includes(e.key)),eJ=ei.length===g.length,eV=["image","name"];return q?(0,a.jsx)("div",{className:"configs",children:(0,a.jsx)("div",{className:"configs__loading",children:"Checking access..."})}):c?x?(0,a.jsx)("div",{className:"configs",children:(0,a.jsxs)("div",{className:"configs__container",children:[(0,a.jsx)("div",{className:"configs__header",children:(0,a.jsx)("h1",{className:"configs__title",children:"Game Settings"})}),y&&(0,a.jsx)("p",{className:"configs__error",children:y}),(0,a.jsxs)("div",{className:"configs__tabs",children:[(0,a.jsx)("button",{className:`configs__tab ${"characters"===N?"configs__tab--active":""}`,onClick:()=>k("characters"),children:"Characters"}),(0,a.jsx)("button",{className:`configs__tab ${"states"===N?"configs__tab--active":""}`,onClick:()=>k("states"),children:"States"}),(0,a.jsx)("button",{className:`configs__tab ${"classes"===N?"configs__tab--active":""}`,onClick:()=>k("classes"),children:"Classes"}),(0,a.jsx)("button",{className:`configs__tab ${"races"===N?"configs__tab--active":""}`,onClick:()=>k("races"),children:"Races"}),(0,a.jsx)("button",{className:`configs__tab ${"occupations"===N?"configs__tab--active":""}`,onClick:()=>k("occupations"),children:"Occupations"}),(0,a.jsx)("button",{className:`configs__tab ${"associations"===N?"configs__tab--active":""}`,onClick:()=>k("associations"),children:"Associations"}),(0,a.jsx)("button",{className:`configs__tab ${"places"===N?"configs__tab--active":""}`,onClick:()=>k("places"),children:"Places"})]}),D?(0,a.jsx)("div",{className:"configs__loading",children:"Loading data..."}):(0,a.jsxs)("div",{className:"configs__content",children:["characters"===N&&(0,a.jsxs)("div",{className:"character-table",children:[(0,a.jsxs)("div",{className:"character-table__header",children:[(0,a.jsx)("h2",{children:"Characters"}),(0,a.jsxs)("div",{className:"configs__table-toolbar",children:[(0,a.jsxs)("div",{className:"configs__column-picker",ref:eh,children:[(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>ec(e=>!e),children:"Columns"}),et&&(0,a.jsxs)("div",{className:"configs__column-menu",children:[(0,a.jsxs)("div",{className:"configs__column-actions",children:[(0,a.jsx)("button",{type:"button",className:"configs__column-action",onClick:()=>{el(g.map(e=>e.key))},disabled:eJ,children:"Select all"}),(0,a.jsx)("button",{type:"button",className:"configs__column-action",onClick:()=>{el(eV)},disabled:ei.length===eV.length,children:"Deselect all"})]}),g.map(e=>(0,a.jsxs)("label",{className:"configs__column-option",children:[(0,a.jsx)("input",{type:"checkbox",checked:ei.includes(e.key),onChange:()=>{var a;"image"!==(a=e.key)&&"name"!==a&&el(e=>{let s=e.includes(a)?e.filter(e=>e!==a):[...e,a];return g.map(e=>e.key).filter(e=>s.includes(e))})},disabled:"image"===e.key||"name"===e.key}),(0,a.jsx)("span",{children:e.label})]},e.key))]})]}),!T&&(0,a.jsxs)(d.default,{onClick:()=>B(!0),children:[(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(n,{size:16})}),"Add Character"]})]})]}),T&&(0,a.jsxs)("form",{className:"character-form",onSubmit:eN,children:[(0,a.jsxs)("div",{className:"character-form__grid",children:[(0,a.jsxs)("div",{className:"character-form__field character-form__field--wide",children:[(0,a.jsx)("label",{children:"Image"}),(0,a.jsxs)("div",{className:"character-form__media",children:[(0,a.jsx)("div",{className:"character-form__media-preview",children:Y?(0,a.jsx)("img",{src:Y,alt:"Preview"}):(0,a.jsx)("span",{children:"No preview"})}),(0,a.jsxs)("div",{className:"character-form__media-controls",children:[(0,a.jsxs)("div",{className:"character-form__toggle",children:[(0,a.jsx)("button",{type:"button",className:"url"===W?"is-active":"",onClick:()=>{X("url"),G(e=>({...e,image_url:e.image_url||e_}))},children:"Use URL"}),(0,a.jsx)("button",{type:"button",className:"upload"===W?"is-active":"",onClick:()=>X("upload"),children:"Upload file"})]}),"url"===W?(0,a.jsx)("input",{id:"image_url",type:"url",value:V.image_url,onChange:e=>G({...V,image_url:e.target.value}),placeholder:e_}):(0,a.jsxs)("div",{className:"character-form__file",children:[(0,a.jsx)("input",{id:"image_file",type:"file",accept:"image/*",className:"character-form__file-input",onChange:e=>G({...V,image_file:e.target.files?.[0]??null})}),(0,a.jsx)("label",{htmlFor:"image_file",className:"character-form__file-button",children:"Choose file"}),(0,a.jsx)("span",{className:"character-form__file-name",children:V.image_file?.name||"No file selected"})]})]})]})]}),(0,a.jsxs)("div",{className:"character-form__row character-form__row--two",children:[(0,a.jsxs)("div",{className:"character-form__field",children:[(0,a.jsx)("label",{htmlFor:"name",children:"Name"}),(0,a.jsx)("input",{id:"name",type:"text",value:V.name,onChange:e=>G({...V,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"character-form__field",children:[(0,a.jsx)("label",{htmlFor:"age",children:"Age"}),(0,a.jsx)("input",{id:"age",type:"number",min:0,value:V.age,onChange:e=>G({...V,age:""===e.target.value?"":Number(e.target.value)})})]})]}),(0,a.jsxs)("div",{className:"character-form__attributes",children:[(0,a.jsx)(ew,{label:"State",fieldKey:"state_id",options:S,selectedIds:V.state_id?[V.state_id]:[],onAdd:e=>G({...V,state_id:e}),onRemove:()=>G({...V,state_id:""}),single:!0}),(0,a.jsx)(ew,{label:"Classes",fieldKey:"class_ids",options:eg.class_ids,selectedIds:V.class_ids,onAdd:e=>ej("class_ids",e),onRemove:e=>ej("class_ids",e)}),(0,a.jsx)(ew,{label:"Races",fieldKey:"race_ids",options:eg.race_ids,selectedIds:V.race_ids,onAdd:e=>ej("race_ids",e),onRemove:e=>ej("race_ids",e)}),(0,a.jsx)(ew,{label:"Occupations",fieldKey:"occupation_ids",options:eg.occupation_ids,selectedIds:V.occupation_ids,onAdd:e=>ej("occupation_ids",e),onRemove:e=>ej("occupation_ids",e)}),(0,a.jsx)(ew,{label:"Associations",fieldKey:"association_ids",options:eg.association_ids,selectedIds:V.association_ids,onAdd:e=>ej("association_ids",e),onRemove:e=>ej("association_ids",e)}),(0,a.jsx)(ew,{label:"Places",fieldKey:"place_ids",options:eg.place_ids,selectedIds:V.place_ids,onAdd:e=>ej("place_ids",e),onRemove:e=>ej("place_ids",e)})]}),(0,a.jsxs)("div",{className:"character-form__field",children:[(0,a.jsx)("label",{htmlFor:"description",children:"Description"}),(0,a.jsx)("textarea",{id:"description",value:V.description,onChange:e=>G({...V,description:e.target.value}),rows:3,placeholder:"Optional description"})]})]}),(0,a.jsxs)("div",{className:"character-form__actions",children:[(0,a.jsxs)(d.default,{type:"submit",children:[(0,a.jsx)("span",{className:"button__icon",children:H?(0,a.jsx)(r.Pencil,{size:16}):(0,a.jsx)(n,{size:16})}),H?"Update Character":"Add Character"]}),(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>{ev()},children:"Cancel"})]})]}),(0,a.jsx)("div",{className:"character-table__table-shell",children:(0,a.jsx)("div",{className:"character-table__scroll-shell",children:(0,a.jsx)(m.default,{className:"character-table__table-scroll",showHorizontal:!0,children:(0,a.jsx)("div",{className:"character-table__table-clip",children:(0,a.jsx)(u,{className:"character-table__table",columns:[...eT.map(e=>({key:e.key,label:e.label})),{key:"actions",label:"Actions",className:"character-table__cell--actions"}],children:0===w.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:eT.length+1,className:"character-table__empty",children:"No characters found. Add one to get started!"})}):w.map(e=>(0,a.jsxs)("tr",{children:[ei.includes("image")&&(0,a.jsx)("td",{children:e.image_url?(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"character-table__image-preview"}):"-"}),ei.includes("name")&&(0,a.jsx)("td",{children:e.name}),ei.includes("description")&&(0,a.jsx)("td",{children:e.description||"-"}),ei.includes("age")&&(0,a.jsx)("td",{children:e.age||"-"}),ei.includes("state")&&(0,a.jsx)("td",{children:e.state?.name||"-"}),ei.includes("classes")&&(0,a.jsx)("td",{children:ey(e.classes)}),ei.includes("races")&&(0,a.jsx)("td",{children:ey(e.races)}),ei.includes("occupations")&&(0,a.jsx)("td",{children:ey(e.occupations)}),ei.includes("associations")&&(0,a.jsx)("td",{children:ey(e.associations)}),ei.includes("places")&&(0,a.jsx)("td",{children:ey(e.places)}),(0,a.jsx)("td",{className:"character-table__cell--actions",children:(0,a.jsxs)("div",{className:"character-table__actions",children:[eB&&(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>{es(e)},children:(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(l,{size:16})})}),(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>{J(e.id),G({name:e.name,description:e.description||"",image_url:e.image_url||"",image_file:null,age:e.age??"",state_id:e.state?.id||"",class_ids:e.classes.map(e=>e.id),race_ids:e.races.map(e=>e.id),occupation_ids:e.occupations.map(e=>e.id),association_ids:e.associations.map(e=>e.id),place_ids:e.places.map(e=>e.id)}),B(!0),X(e.image_url?"url":"upload")},children:(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(r.Pencil,{size:16})})}),(0,a.jsx)(d.default,{variant:"danger",onClick:()=>e$(e.id),children:(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(o,{size:16})})})]})})]},e.id))})})})})}),ea&&eB&&(0,a.jsx)("div",{className:"character-table__modal",role:"dialog","aria-modal":"true",onClick:ek,children:(0,a.jsxs)("div",{className:"character-table__modal-card",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"character-table__modal-header",children:[(0,a.jsx)("h3",{children:ea.name}),(0,a.jsx)(d.default,{variant:"secondary",onClick:ek,children:"Fechar"})]}),(0,a.jsx)("div",{className:"character-table__modal-body",children:eH.map(e=>{let s={description:ea.description||"-",places:ey(ea.places),state:ea.state?.name||"-",age:String(ea.age??"-"),classes:ey(ea.classes),races:ey(ea.races),occupations:ey(ea.occupations),associations:ey(ea.associations),image:ea.image_url||"-",name:ea.name};return(0,a.jsxs)("div",{className:"character-table__modal-row",children:[(0,a.jsx)("span",{className:"character-table__modal-label",children:e.label}),(0,a.jsx)("span",{className:"character-table__modal-value",children:s[e.key]??"-"})]},e.key)})})]})})]}),eq&&(0,a.jsxs)("div",{className:"lookup-table",children:[(0,a.jsxs)("div",{className:"lookup-table__header",children:[(0,a.jsx)("h2",{children:eq.title}),!er&&(0,a.jsxs)(d.default,{onClick:()=>en(!0),children:[(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(n,{size:16})}),"Add ",eq.title.slice(0,-1)]})]}),er&&(0,a.jsxs)("form",{className:"lookup-table__form",onSubmit:eF,children:[(0,a.jsxs)("div",{className:"lookup-table__field",children:[(0,a.jsx)("label",{htmlFor:"name",children:"Name"}),(0,a.jsx)("input",{id:"name",type:"text",value:eu,onChange:e=>em(e.target.value),required:!0,placeholder:`Enter ${eq.title.toLowerCase().slice(0,-1)} name`,autoFocus:!0})]}),(0,a.jsxs)("div",{className:"lookup-table__actions",children:[(0,a.jsxs)(d.default,{type:"submit",children:[(0,a.jsx)("span",{className:"button__icon",children:eo?(0,a.jsx)(r.Pencil,{size:16}):(0,a.jsx)(n,{size:16})}),eo?"Update":"Add"]}),(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>{en(!1),ed(null),em("")},children:"Cancel"})]})]}),(0,a.jsx)("div",{className:"lookup-table__list",children:0===eq.items.length?(0,a.jsxs)("div",{className:"lookup-table__empty",children:["No ",eq.title.toLowerCase()," found. Add one to get started!"]}):(0,a.jsx)(u,{className:"lookup-table__table",columns:[{key:"name",label:"Name"},{key:"actions",label:"Actions",className:"lookup-table__cell--actions"}],children:eq.items.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"lookup-table__cell--actions",children:(0,a.jsxs)("div",{className:"lookup-table__row-actions",children:[(0,a.jsx)(d.default,{variant:"secondary",onClick:()=>{ed(e.id),em(e.name),en(!0)},children:(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(r.Pencil,{size:16})})}),(0,a.jsx)(d.default,{variant:"danger",onClick:()=>eq.handlers.onDelete(e.id),children:(0,a.jsx)("span",{className:"button__icon",children:(0,a.jsx)(o,{size:16})})})]})})]},e.id))})})]})]})]})}):(0,a.jsx)("div",{className:"configs",children:(0,a.jsx)("div",{className:"configs__loading",children:"Access denied."})}):(0,a.jsx)("div",{className:"configs",children:(0,a.jsx)("div",{className:"configs__loading",children:"Redirecting to login..."})})}e.s(["default",()=>b],58441)}]);